<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Master Template Dashboard Action -->
  <record id="oh_app_ext_action_master_dashboard" model="ir.actions.client">
    <field name="name">Master Template</field>
    <field name="tag">oh_appraisal_dashboard</field>
  </record>

  <!-- Keep the old action for record editing -->
  <record id="oh_app_ext_action_master_form" model="ir.actions.act_window">
    <field name="name">Appraisal Master Records</field>
    <field name="res_model">oh.appraisal.master</field>
    <field name="view_mode">list,form</field>
  </record>

  <!-- Traditional Form View (kept for record editing) -->
  <record id="oh_app_ext_view_master_form" model="ir.ui.view">
    <field name="name">oh.appraisal.master.form</field>
    <field name="model">oh.appraisal.master</field>
    <field name="arch" type="xml">
      <form string="Appraisal Master">
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button name="toggle_active" type="object" 
                    class="oe_stat_button" icon="fa-archive">
              <field name="active" widget="boolean_button" 
                     options='{"terminology": "archive"}'/>
            </button>
          </div>
          <div class="oe_title">
            <h1>
              <field name="name" placeholder="Master Configuration Name"/>
            </h1>
          </div>
          
          <group>
            <group>
              <field name="company_id" options="{'no_create': True}"/>
              <field name="industry_type"/>
              <field name="assessment_period"/>
            </group>
            <group>
              <field name="description"/>
            </group>
          </group>

          <notebook>
            <page string="Templates">
              <group>
                <field name="master_template_id"/>
                <field name="department_template_ids" widget="many2many_tags"/>
                <field name="role_template_ids" widget="many2many_tags"/>
                <field name="common_template_ids" widget="many2many_tags"/>
              </group>
            </page>

            <page string="Weightages">
              <group string="Category Weightages (must sum to 100%)">
                <field name="weight_functional"/>
                <field name="weight_role"/>
                <field name="weight_common"/>
              </group>
            </page>

            <page string="Scoring &amp; Framework">
              <group>
                <field name="scoring_template_id"/>
                <field name="assessment_framework_id"/>
              </group>
            </page>

            <page string="Simulation Results">
              <group>
                <button name="action_run_simulation" type="object" 
                        string="Run Simulation" class="btn-primary"/>
                <field name="last_sim_final_percentage" readonly="1"/>
                <field name="last_sim_rating" readonly="1"/>
              </group>
              <group string="Last Simulation Details">
                <field name="last_sim_result" widget="text" readonly="1"/>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- List View -->
  <record id="oh_app_ext_view_master_list" model="ir.ui.view">
    <field name="name">oh.appraisal.master.list</field>
    <field name="model">oh.appraisal.master</field>
    <field name="arch" type="xml">
      <list>
        <field name="name"/>
        <field name="company_id"/>
        <field name="industry_type"/>
        <field name="assessment_period"/>
        <field name="active" invisible="1"/>
      </list>
    </field>
  </record>

  <!-- Search View -->
  <record id="oh_app_ext_view_master_search" model="ir.ui.view">
    <field name="name">oh.appraisal.master.search</field>
    <field name="model">oh.appraisal.master</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"/>
        <field name="company_id"/>
        <field name="industry_type"/>
        <separator/>
        <filter string="Active" name="active" domain="[('active','=',True)]"/>
        <filter string="Archived" name="inactive" domain="[('active','=',False)]"/>
        <group expand="0" string="Group By">
          <filter string="Company" name="group_company" context="{'group_by':'company_id'}"/>
          <filter string="Industry" name="group_industry" context="{'group_by':'industry_type'}"/>
        </group>
      </search>
    </field>
  </record>
</odoo>